 <!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{{ page.title }} | {{ site.title }}</title>
  <!-- ‚Üê viewport-fit=cover „ÇíËøΩÂä†ÔºàiPhone„ÅÆ„Çª„Éº„Éï„Ç®„É™„Ç¢ÂØæÂøúÔºâ -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  {%- if site.description -%}<meta name="description" content="{{ site.description }}">{%- endif -%}
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <style>
    :root { --max: 980px; --pad: 16px; --radius: 14px; }
    * { box-sizing: border-box; }
    body { margin:0; font: 16px/1.65 -apple-system,BlinkMacSystemFont,"Segoe UI","Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif; color:#111; background:#fff; }
    header, main, footer { max-width: var(--max); margin: 0 auto; padding: 0 var(--pad); }
    header { padding-top: 14px; padding-bottom: 8px; }
    h1 { font-size: 1.25rem; margin: 0; }
    nav ul { list-style: none; display: flex; gap: 10px; flex-wrap: wrap; padding: 0; margin: 10px 0 0; }
    nav a { display:block; padding:10px 14px; border:1px solid #eee; border-radius: var(--radius); text-decoration:none; color:#111; }
    nav a:hover { background:#f7f7f7; }
    main { padding: 16px 0 24px; }
    .card { border:1px solid #eee; border-radius: var(--radius); padding:16px; background:#fff; }
    img { max-width:100%; height:auto; }
    @media (min-width: 768px) { body { font-size: 17px; } }

    /* ===== ÂÖ±ÈÄö PDF „É¢„Éº„ÉÄ„É´ ===== */
    dialog#globalPdfModal{
      border:none; margin:0; padding:0;
      max-width:100vw; width:100vw; height:100dvh; border-radius:0; background:#fff;
    }
    dialog#globalPdfModal::backdrop{ background:rgba(0,0,0,.35); }
    #globalPdfHead{display:flex;justify-content:space-between;align-items:center;padding:.7rem .9rem;border-bottom:1px solid #eee;background:#fff}
    #globalPdfTitle{font-size:1rem;font-weight:600}
    #closeGlobalPdf{border:none;background:#fff;font-size:1.1rem;line-height:1;border-radius:8px;padding:.3rem .5rem;cursor:pointer}
    #globalPdfBody{height:calc(100dvh - 48px - env(safe-area-inset-bottom));padding:0;margin:0;background:#fff}
    #globalPdfFrame{width:100%;height:100%;border:0;display:block;background:#fff}
    body.noscroll{overflow:hidden}
    @supports not (height: 100dvh){
      dialog#globalPdfModal{height:96vh}
      #globalPdfBody{height:calc(96vh - 48px)}
    }
  </style>
</head>
<body>
  <header>
    <h1>{{ site.title | default: "activity-site" }}</h1>
    <!-- „Éó„É≠„Éï„Ç£„Éº„É´„Çí„Éà„ÉÉ„Éó„Å´„ÄÇÈ†ÜÂ∫èÔºö„Éó„É≠„Éï„Ç£„Éº„É´‚ÜíÂÖ¨Á¥Ñ‚ÜíÊ¥ªÂãï‚Üí‰∏ÄËà¨Ë≥™Âïè -->
    <nav>
      <ul>
        <li><a href="{{ '/' | relative_url }}">„Éó„É≠„Éï„Ç£„Éº„É´</a></li>
        <li><a href="{{ '/pages/promise.html' | relative_url }}">ÂÖ¨Á¥Ñ</a></li>
        <li><a href="{{ '/pages/activity.html' | relative_url }}">Ê¥ªÂãï</a></li>
        <li><a href="{{ '/pages/matrix.html' | relative_url }}">‰∏ÄËà¨Ë≥™Âïè</a></li>
      </ul>
    </nav>
  </header>

  <main>
    {{ content }}
  </main>

  <footer style="padding:24px 0; color:#666;">
    <small>&copy; {{ site.time | date: '%Y' }} {{ site.author | default: 'sakioyousuke-eng' }}</small>
  </footer>

  <!-- ===== ÂÖ±ÈÄö PDF „É¢„Éº„ÉÄ„É´ÔºàÂÖ®„Éö„Éº„Ç∏ÂÖ±ÈÄöÔºâ ===== -->
  <dialog id="globalPdfModal" aria-label="PDF„ÇíË°®Á§∫">
    <div id="globalPdfHead">
      <strong id="globalPdfTitle">PDF</strong>
      <button id="closeGlobalPdf" aria-label="Èñâ„Åò„Çã">√ó</button>
    </div>
    <div id="globalPdfBody">
      <iframe id="globalPdfFrame" title="PDFË°®Á§∫" loading="lazy" referrerpolicy="no-referrer" allowfullscreen></iframe>
    </div>
  </dialog>

    <script>
  (function(){
    const dlg   = document.getElementById('globalPdfModal');
    const frame = document.getElementById('globalPdfFrame');
    const title = document.getElementById('globalPdfTitle');
    const btnClose = document.getElementById('closeGlobalPdf');
    if(!dlg||!frame) return;

    // PDF„ÇíÂ∏∏„Å´ÁîªÈù¢„Çµ„Ç§„Ç∫„Å´„Éï„Ç£„ÉÉ„Éà„Åï„Åõ„Å¶Èñã„ÅèÈñ¢Êï∞
    function withPdfViewerParams(href){
      try{
        const url = new URL(href, window.location.href);
        const rawHash = url.hash.replace(/^#/,'');
        const sp = new URLSearchParams(rawHash);

        // üü¢ Safari„ÇÑiPhoneÂØæÂøúÔºö1„Éö„Éº„Ç∏ÂÖ®‰Ωì„ÇíÁîªÈù¢„Å´Âèé„ÇÅ„Çã
        sp.set('view','Fit');            // ‚Üê ‚òÖ „Åì„Åì„Çípage-fit„Åã„ÇâÂ§âÊõ¥
        sp.set('zoom','page-fit');       // Âøµ„ÅÆ„Åü„ÇÅ‰ΩµË®òÔºàPC„Éì„É•„Éº„ÉØÁî®Ôºâ
        sp.set('toolbar','0');
        sp.set('navpanes','0');

        url.hash = sp.toString();
        return url.toString();
      }catch(e){
        return href + (href.includes('#') ? '&' : '#') + 'view=Fit&zoom=page-fit&toolbar=0&navpanes=0';
      }
    }

    // data-modal="pdf" „ÅÆ„É™„É≥„ÇØ„ÇíÊ®™Âèñ„Çä„Åó„Å¶„É¢„Éº„ÉÄ„É´Ë°®Á§∫
    document.addEventListener('click', function(e){
      const a = e.target.closest('a[data-modal="pdf"]');
      if(!a) return;
      e.preventDefault();

      title.textContent = a.dataset.title || 'PDF';
      frame.src = withPdfViewerParams(a.getAttribute('href'));
      document.body.classList.add('noscroll');
      dlg.showModal();
    }, {passive:false});

    function closePdf(){
      frame.src = 'about:blank';
      dlg.close();
      document.body.classList.remove('noscroll');
    }
    btnClose.addEventListener('click', closePdf);
    dlg.addEventListener('close', closePdf);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && dlg.open) closePdf(); });
  })();
  </script>

</body>
</html>
 
