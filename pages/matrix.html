---
layout: default
title: ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
---

<h1>ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹</h1>
<p>è¡¨ã®è¡Œã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€è³ªå•è©³ç´°ã‚«ãƒ¼ãƒ‰ãŒé–‹ãã¾ã™ã€‚PDFã¯ãã®å ´ã§é–²è¦§ã§ãã¾ã™ã€‚</p>

<nav class="tabs">
  <a href="{{ '/' | relative_url }}">ğŸ  ãƒˆãƒƒãƒ—</a>
  <a href="{{ '/pages/activity.html' | relative_url }}">ğŸ¡ æ´»å‹•</a>
  <a href="{{ '/pages/matrix.html' | relative_url }}" class="active">ğŸ’¬ ä¸€èˆ¬è³ªå•</a>
</nav>

<div class="toolbar">
  <div class="filters">
    <button class="fbtn active" data-filter="all">å…¨ä½“</button>
    <button class="fbtn" data-filter="æ•™è‚²">æ•™è‚²</button>
    <button class="fbtn" data-filter="ç¦ç¥‰">ç¦ç¥‰</button>
    <button class="fbtn" data-filter="è¦³å…‰">è¦³å…‰</button>
    <button class="fbtn" data-filter="ãã®ä»–">ãã®ä»–</button>
  </div>
  <input id="kw" type="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆå¹´æœˆãƒ»è³ªå•ãƒ»ä¼šæœŸï¼‰">
</div>

<div class="matrix-wrap">
<table class="matrix">
  <thead>
    <tr>
      <th style="width:6rem;">å¹´æœˆ</th>
      <th>è³ªå•è¦æ—¨ï¼ä¼šæœŸ</th>
      <th style="width:5rem;">åˆ†é‡</th>
      <th style="width:5rem;">è³‡æ–™</th>
    </tr>
  </thead>
  <tbody>
  {%- assign data = site.data.matrix -%}
  {%- assign rows = "" | split: "" -%}
  {%- for pair in data -%}
    {%- assign cat = pair[0] -%}
    {%- for item in pair[1] -%}
      {%- assign r = item.sakio -%}
      {%- assign r = r | merge: {"__cat__": cat, "related": item.related} -%}
      {%- assign rows = rows | push: r -%}
    {%- endfor -%}
  {%- endfor -%}
  {%- assign sorted = rows | sort: "month" | reverse -%}

  {%- for r in sorted -%}
  <tr class="row"
      data-title="{{ r.text }}"
      data-session="{{ r.session }}"
      data-month="{{ r.month }}"
      data-category="{{ r.__cat__ }}"
      data-pdf="{{ r.pdf }}"
      data-related='{{ r.related | jsonify }}'>
    <td><span class="ym">{{ r.month }}</span></td>
    <td>
      <div class="q-title">{{ r.text }}</div>
      <div class="q-session">{{ r.session }}</div>
    </td>
    <td><span class="badge">{{ r.__cat__ }}</span></td>
    <td>
      {% if r.pdf %}
      <a href="{{ r.pdf | relative_url }}" class="open-modal" data-title="{{ r.text }}">PDF</a>
      {% endif %}
    </td>
  </tr>
  {%- endfor -%}
  </tbody>
</table>
</div>

<!-- è©³ç´°ã‚«ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<dialog id="detailModal" aria-label="è©³ç´°">
  <div class="modal-head">
    <strong id="detailTitle"></strong>
    <button id="closeDetail">Ã—</button>
  </div>
  <div class="modal-body">
    <p><strong>ä¼šæœŸ:</strong> <span id="detailSession"></span></p>
    <p><strong>å¹´æœˆ:</strong> <span id="detailMonth"></span></p>
    <p><strong>åˆ†é‡:</strong> <span id="detailCat"></span></p>
    <div id="detailRelated"></div>
    <div id="detailPDF"></div>
  </div>
</dialog>

<!-- PDFãƒ¢ãƒ¼ãƒ€ãƒ« -->
<dialog id="pdfModal">
  <div class="modal-head">
    <strong id="pdfTitle">è³‡æ–™</strong>
    <button id="closeModal">Ã—</button>
  </div>
  <div class="modal-body">
    <iframe id="pdfFrame" src="about:blank" title="PDFãƒ“ãƒ¥ãƒ¼ã‚¢"></iframe>
  </div>
</dialog>

<style>
/* åŸºæœ¬ */
.matrix-wrap{overflow:auto;border:1px solid #eee;border-radius:10px}
table.matrix{width:100%;border-collapse:collapse;font-size:.95rem}
.matrix th,.matrix td{padding:.45rem .5rem;border-bottom:1px solid #f1f5f9}
.matrix th{background:#fafafa;font-weight:600}
.row:hover{background:#f7fbff;cursor:pointer}

/* åˆ—èª¿æ•´ */
.q-title{font-size:1.05rem;font-weight:600;line-height:1.4}
.q-session{font-size:.85rem;color:#555;margin-top:.15rem}
.ym{font-size:.85rem;color:#444}
.badge{font-size:.8rem;background:#eef5ff;border:1px solid #cfe2ff;border-radius:6px;padding:.15rem .5rem}
a.open-modal{color:#1d4ed8;text-decoration:none}

/* ãƒ•ã‚£ãƒ«ã‚¿ãƒãƒ¼ */
.toolbar{display:flex;justify-content:space-between;align-items:center;margin:.6rem 0 1rem;flex-wrap:wrap;gap:.5rem}
.filters{display:flex;gap:.4rem;flex-wrap:wrap}
.fbtn{border:1px solid #e5e7eb;background:#fff;padding:.35rem .7rem;border-radius:999px;cursor:pointer}
.fbtn.active{background:#eef5ff;border-color:#cfe2ff}
input#kw{padding:.45rem .6rem;border:1px solid #e5e7eb;border-radius:9px;width:15rem;max-width:60vw}

/* ãƒ¢ãƒ¼ãƒ€ãƒ« */
dialog{border:none;border-radius:12px;padding:0;box-shadow:0 20px 50px rgba(0,0,0,.25);width:min(680px,94vw)}
dialog::backdrop{background:rgba(0,0,0,.35)}
.modal-head{display:flex;justify-content:space-between;align-items:center;padding:.8rem 1rem;border-bottom:1px solid #eee;background:#fafafa}
.modal-body{padding:1rem;font-size:.95rem}
.modal-body p{margin:.4rem 0}
.modal-body a{color:#1d4ed8;text-decoration:none}
.modal-body iframe{width:100%;height:80vh;border:none;border-radius:6px}
body.modal-open{overflow:hidden}

/* ã‚¹ãƒãƒ›æœ€é©åŒ– */
@media(max-width:720px){
  .matrix th,.matrix td{padding:.25rem .4rem}
  .q-title{font-size:.95rem}
  .q-session{font-size:.8rem}
  .ym{font-size:.8rem}
  dialog#pdfModal{width:100vw;height:100vh;border-radius:0}
  dialog#pdfModal iframe{height:calc(100vh - 48px)}
}
</style>

<script>
// ==== ãƒ•ã‚£ãƒ«ã‚¿ãƒ»æ¤œç´¢ ====
function applyFilter(){
  const f = document.querySelector('.fbtn.active')?.dataset.filter || 'all';
  const kw = (document.getElementById('kw').value || '').toLowerCase();
  document.querySelectorAll('tbody tr.row').forEach(r=>{
    const cat=r.dataset.category;
    const txt=(r.dataset.title+' '+r.dataset.session).toLowerCase();
    r.style.display=(f==='all'||f===cat)&&(txt.includes(kw))?'':'none';
  });
}
document.querySelectorAll('.fbtn').forEach(b=>b.addEventListener('click',()=>{
  document.querySelectorAll('.fbtn').forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
  applyFilter();
}));
document.getElementById('kw').addEventListener('input',applyFilter);

// ==== è©³ç´°ã‚«ãƒ¼ãƒ‰ ====
const dlgDetail=document.getElementById('detailModal');
document.addEventListener('click',e=>{
  const row=e.target.closest('tr.row');
  if(!row)return;
  document.getElementById('detailTitle').textContent=row.dataset.title;
  document.getElementById('detailSession').textContent=row.dataset.session;
  document.getElementById('detailMonth').textContent=row.dataset.month;
  document.getElementById('detailCat').textContent=row.dataset.category;
  // é¡ä¼¼è­°å“¡
  const rel=JSON.parse(row.dataset.related||'[]');
  const relDiv=document.getElementById('detailRelated');
  relDiv.innerHTML=rel.length?'<strong>é¡ä¼¼è­°å“¡:</strong><ul>'+rel.map(x=>`<li>${x.name}ï¼ˆ${x.party}ï¼‰ï¼š${x.month}ï¼${x.topic}</li>`).join('')+'</ul>':'';
  // PDF
  const pdf=row.dataset.pdf;
  const pdfDiv=document.getElementById('detailPDF');
  pdfDiv.innerHTML=pdf?`<p><a href="${pdf}" class="open-modal" data-title="${row.dataset.title}">ğŸ“„ PDFã‚’é–‹ã</a></p>`:'';
  dlgDetail.showModal();
});
document.getElementById('closeDetail').addEventListener('click',()=>dlgDetail.close());

// ==== PDFãƒ¢ãƒ¼ãƒ€ãƒ« ====
const dlgPDF=document.getElementById('pdfModal');
const frame=document.getElementById('pdfFrame');
document.addEventListener('click',e=>{
  const a=e.target.closest('a.open-modal');
  if(!a)return;
  e.preventDefault();
  frame.src=a.getAttribute('href')+'#view=FitH';
  document.getElementById('pdfTitle').textContent=a.dataset.title||'è³‡æ–™';
  dlgPDF.showModal();
});
document.getElementById('closeModal').addEventListener('click',()=>{
  dlgPDF.close();frame.src='about:blank';
});
applyFilter();
</script>
