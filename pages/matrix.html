---
layout: default
title: 一般質問（カテゴリ別）
permalink: /pages/matrix.html
---

<h2 style="margin:0 0 10px;">一般質問（カテゴリ別）</h2>
<p class="muted" style="margin:6px 0 16px;">教育／福祉／観光／その他で分類。各カテゴリ内は新しい順に表示します。</p>

<style>
.section{border:1px solid #eee;border-radius:12px;padding:14px 16px;margin:0 0 16px;background:#fff}
.section .head{display:flex;align-items:center;gap:10px;margin:0 0 10px;}
.section .ico{font-size:1.25rem;line-height:1;display:inline-flex;align-items:center;justify-content:center;width:1.6rem;height:1.6rem}
.section .title{font-size:1.05rem;margin:0}
.badge{display:inline-flex;align-items:center;gap:.35em;padding:.2em .55em;border-radius:999px;border:1px solid #cfe2ff;background:#eef5ff;color:#1d4ed8;font-size:.78rem}

.two{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media(max-width:720px){.two{grid-template-columns:1fr}}
.col h4{margin:.2rem 0 .4rem;font-size:.95rem}
.col ul{margin:.2rem 0 0 1rem;padding:0}
.col li{margin:.25rem 0}
.muted{color:#64748b}
.btn{display:inline-flex;align-items:center;gap:.5em;padding:.28rem .6rem;border:1px solid #ddd;border-radius:8px;background:#fff;text-decoration:none;font-size:.86rem}
.btn:hover{background:#fafafa}
.pdf-link{color:#0b67c2;border-color:#0b67c2}
</style>

{% assign rows = site.data.matrix.rows | default: empty %}

{% if rows and rows.size > 0 %}
  {% assign groups = rows | group_by: "category" %}

  {# 表示順：教育→福祉→観光→その他→その他のカテゴリ #}
  {% assign prefer = "教育,福祉,観光,その他" | split: "," %}
  {% assign ordered = "" | split: "" %}
  {% for key in prefer %}
    {% assign found = groups | where: "name", key | first %}
    {% if found %}{% assign ordered = ordered | push: found %}{% endif %}
  {% endfor %}
  {% for g in groups %}
    {% unless prefer contains g.name %}
      {% assign ordered = ordered | push: g %}
    {% endunless %}
  {% endfor %}

  {% for g in ordered %}
    {% assign cat = g.name | default: "その他" %}
    {%- capture icon -%}
      {%- case cat -%}
        {%- when '教育' -%}📘
        {%- when '福祉' -%}💗
        {%- when '観光' -%}🏞
        {%- else -%}🧩
      {%- endcase -%}
    {%- endcapture -%}

    {# カテゴリ内を sakio.month 降順に整列 #}
    {% assign with_key = "" | split: "" %}
    {% for it in g.items %}
      {% assign m = it.sakio.month | default: "0000-00" | replace: "-","" %}
      {% assign it2 = it | merge: {"_monthnum": m} %}
      {% assign with_key = with_key | push: it2 %}
    {% endfor %}
    {% assign sorted = with_key | sort: "_monthnum" | reverse %}

    <section class="section">
      <div class="head">
        <span class="ico" aria-hidden="true">{{ icon | strip }}</span>
        <h3 class="title">{{ cat }}</h3>
        <span class="badge">カテゴリ</span>
      </div>

      <div class="two">
        <!-- 左：崎尾 -->
        <div class="col">
          <h4>崎尾</h4>
          <ul>
            {% for it in sorted %}
              {% assign s = it.sakio %}
              <li>
                <strong>{{ s.month }}</strong>　{{ s.text }}
                {% if s.session %}<span class="muted">（{{ s.session }}）</span>{% endif %}
                {% if s.pdf %}
                  &nbsp;<a class="btn pdf-link" href="{{ s.pdf | relative_url }}" data-modal="pdf" data-title="{{ s.text }}">PDF</a>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </div>

        <!-- 右：他議員 -->
        <div class="col">
          <h4>他議員</h4>
          <ul>
            {% for it in sorted %}
              {% if it.related and it.related.size > 0 %}
                {% for r in it.related %}
                  <li>
                    {{ r.name }}（{{ r.party }}）
                    ：<strong>{{ r.month }}</strong>／{{ r.topic }}
                  </li>
                {% endfor %}
              {% endif %}
            {% endfor %}
          </ul>
        </div>
      </div>
    </section>
  {% endfor %}

{% else %}
  <p class="muted">一般質問データが読み込めていません。<code>_data/matrix.yml</code> の <code>rows:</code> をご確認ください。</p>
{% endif %}

