---
layout: default
title: ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
---

<h1>ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹</h1>
<p>ã‚«ãƒ†ã‚´ãƒªï¼ˆåˆ†é‡ï¼‰ã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§çµã‚Šè¾¼ã¿ã§ãã¾ã™ã€‚è¡Œï¼ˆè³ªå•ï¼‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨è©³ç´°ãŒé–‹ãã¾ã™ã€‚</p>

<nav class="tabs">
  <a href="{{ '/' | relative_url }}">ğŸ  ãƒˆãƒƒãƒ—</a>
  <a href="{{ '/pages/activity.html' | relative_url }}">ğŸ¡ æ´»å‹•</a>
  <a href="{{ '/pages/matrix.html' | relative_url }}" class="active">ğŸ’¬ ä¸€èˆ¬è³ªå•</a>
</nav>

{%- assign data = site.data.matrix -%}
{%- if data -%}
  {%- comment -%}
    matrix.yml ã¯
    åˆ†é‡: [ { sakio:{month,session,text,pdf}, related:[...] }, ... ]
    ã¨ã„ã†æ§‹é€ ã€‚ã“ã“ã§ãƒ•ãƒ©ãƒƒãƒˆé…åˆ— rows ã‚’ä½œã‚‹ã€‚
  {%- endcomment -%}
  {%- assign rows = "" | split: "" -%}
  {%- for pair in data -%}
    {%- assign cat = pair[0] -%}
    {%- assign items = pair[1] -%}
    {%- for item in items -%}
      {%- assign r = item | merge: item.sakio -%}
      {%- assign r = r | merge: {"__cat__": cat} -%}
      {%- assign rows = rows | push: r -%}
    {%- endfor -%}
  {%- endfor -%}
  {%- assign sorted = rows | sort: "month" | reverse -%}

  <!-- ãƒ“ãƒ¥ãƒ¼åˆ‡æ›¿ & æ¤œç´¢/ãƒ•ã‚£ãƒ«ã‚¿ -->
  <div class="toolbar">
    <div class="left">
      <button class="viewbtn active" data-view="table">è¡¨</button>
      <button class="viewbtn" data-view="cards">ã‚«ãƒ¼ãƒ‰</button>
      <div class="filters sub">
        <button class="fbtn active" data-filter="all">å…¨ä½“</button>
        {%- for pair in data -%}
          <button class="fbtn" data-filter="{{ pair[0] }}">{{ pair[0] }}</button>
        {%- endfor -%}
      </div>
    </div>
    <div class="right">
      <input id="kw" type="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆå¹´æœˆãƒ»è³ªå•ãƒ»ä¼šæœŸãƒ»åˆ†é‡ï¼‰">
    </div>
  </div>

  <!-- è¡¨ãƒ“ãƒ¥ãƒ¼ -->
  <div id="view-table">
    <div class="table-wrap">
      <table class="dense">
        <thead>
          <tr>
            <th style="width:7.5rem;">å¹´æœˆ</th>
            <th>è³ªå•ï¼ˆè¦æ—¨ï¼‰ / ä¼šæœŸ</th>
            <th style="width:6rem;">åˆ†é‡</th>
            <th style="width:7rem;">è³‡æ–™</th>
          </tr>
        </thead>
        <tbody>
        {%- assign idx = 0 -%}
        {%- for r in sorted -%}
          {%- assign rid = 'mrow-' | append: idx -%}
          <tr class="clickable"
              data-id="{{ rid }}"
              data-category="{{ r.__cat__ }}"
              data-text="{{ r.month }} {{ r.text }} {{ r.session }} {{ r.__cat__ }}">
            <td><span class="date">{{ r.month }}</span></td>
            <td>
              <div class="ttl">{{ r.text }}</div>
              <div class="sum">ä¼šæœŸï¼š{{ r.session }}</div>
            </td>
            <td><span class="cat">{{ r.__cat__ }}</span></td>
            <td class="actions">
              {%- if r.pdf -%}
                <a class="open-pdf"
                   href="{{ r.pdf | relative_url }}"
                   data-modal="pdf"
                   data-title="{{ r.text | escape }}">PDF</a>
              {%- endif -%}
            </td>
          </tr>
          <!-- æ˜ç´°ï¼ˆã‚¹ãƒãƒ›ã¯æŠ˜ã‚ŠãŸãŸã¿ã§é–‹é–‰ï¼‰ -->
          <tr id="{{ rid }}" class="more">
            <td colspan="4">
              <div><strong>è©³ç´°ï¼š</strong>{{ r.session }}ï¼{{ r.month }}ï¼{{ r.text }}</div>
              {%- assign item = nil -%}
              {%- comment -%} related ã‚’å¼•ãå½“ã¦ï¼ˆåŒã˜ month/text ã‚’æ¢ã™ï¼‰ {%- endcomment -%}
              {%- assign rel = "" -%}
              {%- for pair in data -%}
                {%- assign catN = pair[0] -%}
                {%- if catN == r.__cat__ -%}
                  {%- for it in pair[1] -%}
                    {%- if it.sakio.month == r.month and it.sakio.text == r.text -%}
                      {%- assign rel = it.related -%}
                    {%- endif -%}
                  {%- endfor -%}
                {%- endif -%}
              {%- endfor -%}
              {%- if rel and rel.size > 0 -%}
                <div style="margin-top:.35rem;">
                  <strong>é¡ä¼¼è­°å“¡ï¼š</strong>
                  <ul style="margin:.3rem 0 .2rem 1.1rem;">
                    {%- for x in rel -%}
                      <li><strong>{{ x.name }}</strong>ï¼ˆ{{ x.party }}ï¼‰ï¼š{{ x.month }}ï¼{{ x.topic }}</li>
                    {%- endfor -%}
                  </ul>
                </div>
              {%- endif -%}
            </td>
          </tr>
          {%- assign idx = idx | plus: 1 -%}
        {%- endfor -%}
        </tbody>
      </table>
    </div>
  </div>

  <!-- ã‚«ãƒ¼ãƒ‰ãƒ“ãƒ¥ãƒ¼ -->
  <div id="view-cards" style="display:none;">
    <div class="grid">
      {%- for r in sorted -%}
      <div class="card"
           data-category="{{ r.__cat__ }}"
           data-text="{{ r.month }} {{ r.text }} {{ r.session }} {{ r.__cat__ }}">
        <div class="title">
          {{ r.text }} <span class="chip cat">{{ r.__cat__ }}</span>
        </div>
        <p class="meta"><strong>å¹´æœˆ:</strong> {{ r.month }}ã€€<strong>ä¼šæœŸ:</strong> {{ r.session }}</p>
        <div class="actions">
          {%- if r.pdf -%}
            <a class="btn"
               href="{{ r.pdf | relative_url }}"
               data-modal="pdf"
               data-title="{{ r.text | escape }}">PDF</a>
          {%- endif -%}
        </div>
      </div>
      {%- endfor -%}
    </div>
  </div>
{%- else -%}
  <p><code>_data/matrix.yml</code> ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</p>
{%- endif -%}

<style>
/* ã‚¿ãƒ– */
.tabs{display:flex;gap:.5rem;margin:1rem 0 1.25rem;flex-wrap:wrap}
.tabs a{padding:.4rem .7rem;border:1px solid #e5e7eb;border-radius:8px;text-decoration:none}
.tabs a.active{background:#f0f7ff;border-color:#cfe2ff}

/* ãƒ„ãƒ¼ãƒ«ãƒãƒ¼/ãƒ•ã‚£ãƒ«ã‚¿ */
.toolbar{display:flex;justify-content:space-between;align-items:center;gap:.5rem;margin:.6rem 0 1rem;flex-wrap:wrap}
.viewbtn{border:1px solid #e5e7eb;background:#fff;padding:.3rem .6rem;border-radius:999px;cursor:pointer}
.viewbtn.active{background:#eef5ff;border-color:#cfe2ff}
.filters.sub{margin:0 .75rem}
.fbtn{border:1px solid #e5e7eb;background:#fff;padding:.35rem .7rem;border-radius:999px;cursor:pointer}
.fbtn.active{background:#eef5ff;border-color:#cfe2ff}

/* è¡¨ */
.table-wrap{overflow:auto;border:1px solid #eee;border-radius:10px}
table.dense{width:100%;border-collapse:collapse;font-size:.95rem}
table.dense thead th{position:sticky;top:0;background:#fafafa;border-bottom:1px solid #eee;z-index:1}
table.dense th,table.dense td{padding:.55rem .6rem;border-bottom:1px solid #f1f5f9;vertical-align:top}
table.dense tbody tr:hover{background:#f7fbff}
.date{white-space:nowrap}
.ttl{font-weight:600;margin-bottom:.12rem}
.sum{color:#475569;font-size:.9rem}
.cat{font-size:.8rem;background:#f3f4f6;border:1px solid #e5e7eb;padding:.05rem .45rem;border-radius:6px}
.actions a{display:inline-block;font-size:.9rem;margin-right:.4rem}

/* ã‚«ãƒ¼ãƒ‰ */
.grid{display:grid;gap:1.2rem;grid-template-columns:1fr}
@media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
.card{border-radius:16px;padding:1.2rem;background:#fff;box-shadow:0 4px 10px rgba(0,0,0,.05);transition:transform .2s ease, box-shadow .2s ease}
.card:hover{transform:translateY(-4px);box-shadow:0 6px 14px rgba(0,0,0,.1)}
.title{font-weight:700;font-size:1.05rem;margin-bottom:.35rem;display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}
.chip.cat{font-size:.75rem;padding:.15rem .5rem;border-radius:999px;background:#f3f4f6;border:1px solid #e5e7eb}
.meta{color:#4b5563;margin:.2rem 0 .4rem}
.btn{background:#eff6ff;color:#1d4ed8;padding:.35rem .65rem;border-radius:8px;text-decoration:none;border:1px solid #dbeafe}
.btn:hover{background:#dbeafe}

/* ã‚¹ãƒãƒ›æœ€é©åŒ–ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼é«˜ã•ä¸€è‡´ï¼‹æŠ˜ã‚ŠãŸãŸã¿ï¼‰ */
@media(max-width:720px){
  table.dense{table-layout:fixed;font-size:.95rem}
  table.dense th,table.dense td{padding:.18rem .36rem;line-height:1.05;vertical-align:middle}
  table.dense thead th{padding:.18rem .36rem !important;line-height:1.05 !important;vertical-align:middle !important;font-size:.82rem !important;font-weight:500 !important}
  table.dense th:nth-child(1),table.dense td:nth-child(1){width:6.0rem}
  table.dense th:nth-child(3),table.dense td:nth-child(3){width:4.2rem}
  table.dense th:nth-child(4),table.dense td:nth-child(4){width:4.2rem}
  .sum{display:none}
  .date{font-size:.95rem;white-space:nowrap}
  .more{display:none;background:#fcfcff}
  .more td{border-top:none;padding-top:.25rem;color:#475569}
  .clickable{cursor:pointer}
}

/* å°ã‚¢ãƒ‹ãƒ¡ */
.more.open{display:table-row}
</style>

<script>
(function(){
  // è¡¨/ã‚«ãƒ¼ãƒ‰åˆ‡æ›¿
  document.querySelectorAll('.viewbtn').forEach(b=>{
    b.addEventListener('click',()=>{
      document.querySelectorAll('.viewbtn').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      const v=b.dataset.view;
      document.getElementById('view-table').style.display=(v==='table')?'':'none';
      document.getElementById('view-cards').style.display=(v==='cards')?'':'none';
      localStorage.setItem('matrix_view', v);
    });
  });

  // ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ï¼†æ¤œç´¢ï¼ˆè¡¨/ã‚«ãƒ¼ãƒ‰å…±é€šï¼‰
  function applyFilter(){
    const f = document.querySelector('.filters .fbtn.active')?.dataset.filter || 'all';
    const kw = (document.getElementById('kw')?.value || '').toLowerCase();

    const rows  = document.querySelectorAll('tr.clickable');
    const more  = document.querySelectorAll('tr.more');
    const cards = document.querySelectorAll('#view-cards .card');

    function show(el,cat,text){
      const okCat = (f==='all'||cat===f);
      const okKw  = (!kw || (text||'').toLowerCase().includes(kw));
      el.style.display = (okCat && okKw) ? '' : 'none';
    }
    rows.forEach(r=>show(r, r.dataset.category, r.dataset.text));
    more.forEach(m=>{
      const target = document.querySelector('tr.clickable[data-id="'+m.id+'"]');
      if(target && target.style.display==='none'){ m.style.display='none'; }
    });
    cards.forEach(c=>show(c, c.dataset.category, c.dataset.text));
  }

  document.querySelectorAll('.fbtn').forEach(b=>{
    b.addEventListener('click',()=>{
      const val=b.dataset.filter;
      document.querySelectorAll('.fbtn').forEach(x=>{
        x.classList.toggle('active', x.dataset.filter===val || (val==='all'&&x.dataset.filter==='all'));
      });
      applyFilter();
    });
  });
  document.getElementById('kw')?.addEventListener('input', applyFilter);

  // è¡Œã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°é–‹é–‰ï¼ˆã‚¹ãƒãƒ›ç”¨ï¼‰
  document.addEventListener('click', (e)=>{
    const tr = e.target.closest('tr.clickable');
    if(!tr) return;
    const id = tr.getAttribute('data-id');
    const detail = document.getElementById(id);
    if(!detail) return;
    detail.classList.toggle('open');
  });

  // åˆæœŸçŠ¶æ…‹ï¼ˆæ°¸ç¶šãƒ“ãƒ¥ãƒ¼ï¼‰
  const saved=localStorage.getItem('matrix_view');
  if(saved==='cards'){ document.querySelector('.viewbtn[data-view="cards"]').click(); }
  applyFilter();
})();
</script>
