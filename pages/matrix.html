---
layout: default
title: ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
---

<h1>ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹</h1>
<p>è¡Œï¼ˆè³ªå•ï¼‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€ä¼šæœŸã‚„é¡ä¼¼è­°å“¡ã®è©³ç´°ãŒé–‹é–‰ã—ã¾ã™ã€‚PDFã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ãã®å ´è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<!-- ã‚¿ãƒ–ï¼ˆä»»æ„ãƒŠãƒ“ï¼‰ -->
<nav class="tabs">
  <a href="{{ '/' | relative_url }}">ğŸ  ãƒˆãƒƒãƒ—</a>
  <a href="{{ '/pages/activity.html' | relative_url }}">ğŸ¡ æ´»å‹•</a>
  <a href="{{ '/pages/matrix.html' | relative_url }}" class="active">ğŸ’¬ ä¸€èˆ¬è³ªå•</a>
</nav>

<!-- ãƒ•ã‚£ãƒ«ã‚¿ï¼†æ¤œç´¢ -->
<div class="toolbar">
  <div class="filters">
    <button class="fbtn active" data-filter="all">å…¨ä½“</button>
    <button class="fbtn" data-filter="æ•™è‚²">æ•™è‚²</button>
    <button class="fbtn" data-filter="ç¦ç¥‰">ç¦ç¥‰</button>
    <button class="fbtn" data-filter="è¦³å…‰">è¦³å…‰</button>
    <button class="fbtn" data-filter="ãã®ä»–">ãã®ä»–</button>
  </div>
  <div class="search">
    <input id="kw" type="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆå¹´æœˆãƒ»è³ªå•ãƒ»ä¼šæœŸï¼‰">
  </div>
</div>

<!-- è¡¨æœ¬ä½“ -->
<div class="matrix-wrap">
<table class="matrix">
  <thead>
    <tr>
      <th style="width:7.2rem;">å¹´æœˆ</th>
      <th>è³ªå•ï¼ˆè¦æ—¨ï¼‰ï¼ä¼šæœŸ</th>
      <th style="width:5.2rem;">åˆ†é‡</th>
      <th style="width:6.2rem;">è³‡æ–™</th>
    </tr>
  </thead>
  <tbody>
  {%- comment -%}
    YAMLã¯ã€Œåˆ†é‡: - { sakio: {...}, related:[...] }ã€ã®å½¢ã€‚
    ã“ã“ã§ä¸€æ—¦ãƒ•ãƒ©ãƒƒãƒˆåŒ–ã—ã¦ã‹ã‚‰æœˆã§é™é †ã‚½ãƒ¼ãƒˆã€‚
  {%- endcomment -%}
  {%- assign data = site.data.matrix -%}
  {%- assign rows = "" | split: "" -%}
  {%- for pair in data -%}
    {%- assign cat = pair[0] -%}
    {%- assign items = pair[1] -%}
    {%- for item in items -%}
      {%- assign r = item.sakio -%}
      {%- assign r = r | merge: {"__cat__": cat, "related": item.related} -%}
      {%- assign rows = rows | push: r -%}
    {%- endfor -%}
  {%- endfor -%}
  {%- assign sorted = rows | sort: "month" | reverse -%}

  {%- for r in sorted -%}
    {%- assign row_id = 'row-' | append: forloop.index -%}
    <tr class="data-row"
        data-target="{{ row_id }}"
        data-category="{{ r.__cat__ }}"
        data-text="{{ r.month }} {{ r.session }} {{ r.text }} {{ r.__cat__ }}">
      <td><span class="ym">{{ r.month }}</span></td>
      <td>
        <div class="q"><strong>{{ r.text }}</strong></div>
        <div class="pill">ä¼šæœŸï¼š{{ r.session }}</div>
      </td>
      <td><span class="badge">{{ r.__cat__ }}</span></td>
      <td class="actions">
        {%- if r.pdf -%}
          <a href="{{ r.pdf | relative_url }}" class="pdf open-modal" data-title="{{ r.text }}">PDF</a>
        {%- endif -%}
      </td>
    </tr>

    <tr id="{{ row_id }}" class="detail-row">
      <td colspan="4">
        <div class="detail">
          <div><strong>è³ªå•è©³ç´°</strong>ï¼š{{ r.session }} ï¼ {{ r.month }} ï¼ {{ r.text }}</div>
          {%- if r.pdf -%}
          <div class="detail-actions">
            <a href="{{ r.pdf | relative_url }}" class="btn open-modal" data-title="{{ r.text }}">ğŸ“„ PDFã‚’é–‹ã</a>
          </div>
          {%- endif -%}
          {%- if r.related and r.related.size > 0 -%}
            <div>
              <strong>é¡ä¼¼è­°å“¡</strong>
              <ul class="related">
                {%- for x in r.related -%}
                <li><strong>{{ x.name }}</strong>ï¼ˆ{{ x.party }}ï¼‰ï¼š{{ x.month }}ï¼{{ x.topic }}</li>
                {%- endfor -%}
              </ul>
            </div>
          {%- endif -%}
        </div>
      </td>
    </tr>
  {%- endfor -%}
  </tbody>
</table>
</div>

<!-- PDFãƒ¢ãƒ¼ãƒ€ãƒ« -->
<dialog id="pdfModal" aria-label="PDFè¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ«">
  <div class="modal-head">
    <strong id="pdfTitle">è³‡æ–™</strong>
    <button id="closeModal" aria-label="é–‰ã˜ã‚‹">Ã—</button>
  </div>
  <div class="modal-body">
    <iframe id="pdfFrame" src="about:blank" title="PDFãƒ“ãƒ¥ãƒ¼ã‚¢" frameborder="0"></iframe>
  </div>
</dialog>

<style>
/* ã‚¿ãƒ– */
.tabs{display:flex;gap:.5rem;margin:1rem 0 1.25rem;flex-wrap:wrap}
.tabs a{padding:.4rem .7rem;border:1px solid #e5e7eb;border-radius:8px;text-decoration:none}
.tabs a.active{background:#f0f7ff;border-color:#cfe2ff}

/* ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ */
.toolbar{display:flex;justify-content:space-between;align-items:center;gap:.6rem;margin:.6rem 0 1rem;flex-wrap:wrap}
.filters{display:flex;gap:.4rem;flex-wrap:wrap}
.fbtn{border:1px solid #e5e7eb;background:#fff;padding:.32rem .7rem;border-radius:999px;cursor:pointer}
.fbtn.active{background:#eef5ff;border-color:#cfe2ff}
.search input{padding:.45rem .6rem;border:1px solid #e5e7eb;border-radius:9px;width:16rem;max-width:60vw}

/* è¡¨ */
.matrix-wrap{overflow:auto;border:1px solid #eee;border-radius:10px}
table.matrix{width:100%;border-collapse:collapse;font-size:.95rem}
.matrix thead th{position:sticky;top:0;background:#fafafa;border-bottom:1px solid #eee;z-index:1}
.matrix th,.matrix td{padding:.55rem .6rem;border-bottom:1px solid #f1f5f9;vertical-align:top}
.matrix tbody tr.data-row:hover{background:#f7fbff}
.badge{display:inline-block;padding:.15rem .5rem;border-radius:999px;background:#eef5ff;border:1px solid #cfe2ff;font-size:.82rem}
.pill{display:inline-block;padding:.12rem .5rem;border:1px solid #e5e7eb;border-radius:6px;margin-top:.25rem;background:#fafafa;font-size:.84rem}
.actions a.pdf{display:inline-block}

/* è©³ç´°è¡Œ */
.detail-row{display:none;background:#fcfcff}
.detail-row.open{display:table-row}
.detail{display:grid;gap:.5rem}
.detail-actions .btn{background:#eff6ff;color:#1d4ed8;padding:.35rem .65rem;border-radius:8px;text-decoration:none;border:1px solid #dbeafe}

/* ã‚¹ãƒãƒ›æœ€é©åŒ– */
@media (max-width:720px){
  table.matrix{table-layout:fixed;font-size:.95rem}
  .matrix th,.matrix td{padding:.18rem .36rem;line-height:1.05;vertical-align:middle}
  .matrix thead th{padding:.18rem .36rem;font-size:.85rem}
  .matrix th:nth-child(1),.matrix td:nth-child(1){width:6.2rem}
  .matrix th:nth-child(3),.matrix td:nth-child(3){width:4.6rem}
  .matrix th:nth-child(4),.matrix td:nth-child(4){width:4.8rem}
  .q{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;line-height:1.35}
}

/* ===== PDFãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆã‚¹ãƒãƒ›å®Œå…¨å¯¾å¿œï¼‰ ===== */
:root{
  --safe-top: env(safe-area-inset-top,0px);
  --safe-bottom: env(safe-area-inset-bottom,0px);
}
dialog#pdfModal{border:none;padding:0;border-radius:12px;box-shadow:0 20px 50px rgba(0,0,0,.25);width:min(960px,96vw);height:min(82vh,820px)}
dialog::backdrop{background:rgba(0,0,0,.35)}
/* ã‚¹ãƒãƒ›ã¯ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ */
@media (max-width:720px){
  dialog#pdfModal{margin:0;width:100vw;height:100vh;border-radius:0}
  @supports (height:100dvh){ dialog#pdfModal{width:100dvw;height:100dvh} }
}
.modal-head{display:flex;justify-content:space-between;align-items:center;padding:calc(.6rem + var(--safe-top)) .9rem .6rem;border-bottom:1px solid #e5e7eb;background:#fafafa}
.modal-body{height:calc(100% - 48px - var(--safe-top));padding-bottom:var(--safe-bottom);overflow:hidden}
#pdfFrame{width:100%;height:100%;display:block}
body.modal-open{overflow:hidden;overscroll-behavior:contain}
</style>

<script>
// ========== æ¤œç´¢ï¼†ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ ==========
function applyFilter(){
  const f = document.querySelector('.fbtn.active')?.dataset.filter || 'all';
  const kw = (document.getElementById('kw')?.value || '').toLowerCase();
  document.querySelectorAll('tbody tr.data-row').forEach(tr=>{
    const okCat = (f === 'all' || tr.dataset.category === f);
    const okKw  = (!kw || tr.dataset.text.toLowerCase().includes(kw));
    tr.style.display = (okCat && okKw) ? '' : 'none';
    const tgt = document.getElementById(tr.dataset.target);
    if (tgt) tgt.style.display = ''; // çµã‚Šè¾¼ã¿æ™‚ã«è©³ç´°è¡Œã¯ä¸€æ—¦é–‰ã˜ã‚‹
  });
}
document.querySelectorAll('.fbtn').forEach(b=>{
  b.addEventListener('click',()=>{
    const val=b.dataset.filter;
    document.querySelectorAll('.fbtn').forEach(x=>x.classList.toggle('active', x.dataset.filter===val));
    applyFilter();
  });
});
document.getElementById('kw')?.addEventListener('input', applyFilter);

// ========== è¡Œã®é–‹é–‰ ==========
document.addEventListener('click', (e)=>{
  const row = e.target.closest('tr.data-row');
  if (!row) return;
  const id = row.getAttribute('data-target');
  const detail = document.getElementById(id);
  if (!detail) return;
  detail.classList.toggle('open');
});

// ========== PDFãƒ¢ãƒ¼ãƒ€ãƒ« ==========
const dlg = document.getElementById('pdfModal');
const frame = document.getElementById('pdfFrame');
const titleEl = document.getElementById('pdfTitle');

// ã€ŒPDFã€ãƒªãƒ³ã‚¯ï¼ˆè¡¨ãƒ»è©³ç´°ã®ä¸¡æ–¹ï¼‰ã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«ã§é–‹ã
document.addEventListener('click', (e)=>{
  const a = e.target.closest('a.open-modal');
  if (!a) return;
  e.preventDefault();
  const href = a.getAttribute('href');
  const title = a.dataset.title || 'è³‡æ–™';
  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–
  const url = href + (href.includes('?') ? '&' : '?') + 't=' + Date.now();
  frame.src = url;
  titleEl.textContent = title;
  dlg.showModal();
  document.body.classList.add('modal-open');
});

document.getElementById('closeModal').addEventListener('click', ()=>{
  dlg.close();
  frame.src = 'about:blank';
  document.body.classList.remove('modal-open');
});

document.addEventListener('keydown', (e)=>{
  if (e.key === 'Escape' && typeof dlg.close === 'function'){
    dlg.close(); frame.src = 'about:blank';
    document.body.classList.remove('modal-open');
  }
});

// åˆæœŸé©ç”¨
applyFilter();
</script>
