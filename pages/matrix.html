---
layout: default
title: ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªã‚¯ã‚¹
---

<h1>ğŸ’¬ ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªã‚¯ã‚¹</h1>
<p>è¡Œã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨è©³ç´°ã‚«ãƒ¼ãƒ‰ã‚’é–‹ãã¾ã™ã€‚PDFãƒªãƒ³ã‚¯ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ãã®å ´è¡¨ç¤ºï¼ˆã‚¹ãƒãƒ›ã§ã‚‚è¦‹åˆ‡ã‚Œã¾ã›ã‚“ï¼‰ã€‚</p>

<div class="toolbar">
  <div class="filters">
    <button class="fbtn active" data-filter="ALL">ã™ã¹ã¦</button>
    <button class="fbtn" data-filter="EDU">ğŸ“˜ æ•™è‚²</button>
    <button class="fbtn" data-filter="WEL">ğŸ’— ç¦ç¥‰</button>
    <button class="fbtn" data-filter="TOUR">ğŸ è¦³å…‰</button>
    <button class="fbtn" data-filter="OTHER">ğŸ§© ãã®ä»–</button>
  </div>
  <input id="kw" type="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆå¹´æœˆãƒ»è¦æ—¨ãƒ»ä¼šæœŸï¼‰" aria-label="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢">
</div>

<div class="matrix-wrap">
  <table class="matrix" id="matrixTable" aria-describedby="matrixHelp">
    <thead>
      <tr>
        <th id="th-month" class="sortable" data-key="month" data-order="desc" title="ã‚¯ãƒªãƒƒã‚¯ã§ä¸¦ã³æ›¿ãˆ">å¹´æœˆ â–¼</th>
        <th>è³ªå•è¦æ—¨ï¼ä¼šæœŸ</th>
        <th id="th-cat" class="sortable" data-key="cat" data-order="asc" title="ã‚¯ãƒªãƒƒã‚¯ã§ä¸¦ã³æ›¿ãˆ">åˆ†é‡ â–²</th>
        <th style="width:5.6rem;">è³‡æ–™</th>
      </tr>
    </thead>
    <tbody>
      {%- assign data = site.data.matrix -%}
      {%- assign rows = "" | split: "" -%}
      {%- for pair in data -%}
        {%- assign cat = pair[0] -%}
        {%- for item in pair[1] -%}
          {%- assign s = item.sakio -%}
          {%- comment -%}
            Jekyll(GitHub Pages)ã§ã¯ merge ãƒ•ã‚£ãƒ«ã‚¿ä¸å¯ã€‚è¡Œã”ã¨ã®é€£æƒ³é…åˆ—ã‚’æ˜ç¤ºä½œæˆã—ã¦ push ã™ã‚‹ã€‚
          {%- endcomment -%}
          {%- assign row = 
            {
              "month": s.month,
              "session": s.session,
              "text": s.text,
              "pdf": s.pdf,
              "__cat__": cat,
              "related": item.related
            }
          -%}
          {%- assign rows = rows | push: row -%}
        {%- endfor -%}
      {%- endfor -%}
      {%- assign sorted = rows | sort: "month" | reverse -%}

      {%- for r in sorted -%}
        {%- assign rawcat = r.__cat__ | to_s | strip -%}
        {%- assign c = rawcat | replace:'ã€€','' | replace:' ',' ' | downcase -%}
        {%- capture _catkey -%}
          {%- if c == '' -%}
            OTHER
          {%- elsif c contains 'æ•™' or c contains 'education' or c contains 'school' -%}
            EDU
          {%- elsif c contains 'ç¦' or c contains 'welfare' or c contains 'child' -%}
            WEL
          {%- elsif c contains 'è¦³' or c contains 'tour' or c contains 'sight' -%}
            TOUR
          {%- else -%}
            OTHER
          {%- endif -%}
        {%- endcapture -%}
        {%- assign catkey = _catkey | strip | upcase -%}

        <tr class="row"
            data-title="{{ r.text | escape }}"
            data-session="{{ r.session | escape }}"
            data-month="{{ r.month | escape }}"
            data-monthnum="{{ r.month | replace:'-','' | plus:0 }}"
            data-category="{{ rawcat }}"
            data-catkey="{{ catkey }}"
            data-pdf="{{ r.pdf | relative_url }}"
            data-related='{{ r.related | jsonify }}'>
          <td><span class="ym">{{ r.month }}</span></td>
          <td>
            <div class="q-title" title="{{ r.text | escape }}">{{ r.text }}</div>
            <div class="q-session">{{ r.session }}</div>
          </td>
          <td>
            <button type="button" class="chip cat" data-catkey="{{ catkey }}" data-cat="{{ rawcat }}">
              <span class="ico"></span><span class="catlabel">{{ rawcat }}</span>
            </button>
          </td>
          <td>
            {%- if r.pdf -%}
              <a href="{{ r.pdf | relative_url }}" class="open-pdf" data-title="{{ r.text | escape }}">PDF</a>
            {%- else -%}
              <span class="muted">â€”</span>
            {%- endif -%}
          </td>
        </tr>
      {%- endfor -%}
    </tbody>
  </table>
  <p id="matrixHelp" class="visually-hidden">ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€Œå¹´æœˆã€ã€Œåˆ†é‡ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ä¸¦ã³æ›¿ãˆã§ãã¾ã™ã€‚</p>
</div>

<!-- è©³ç´°ã‚«ãƒ¼ãƒ‰ -->
<dialog id="detailModal" aria-label="è³ªå•ã®è©³ç´°">
  <div class="modal-head">
    <strong id="detailTitle"></strong>
    <button id="closeDetail" aria-label="é–‰ã˜ã‚‹">Ã—</button>
  </div>
  <div class="modal-body">
    <p class="meta"><strong>ä¼šæœŸ:</strong> <span id="detailSession"></span></p>
    <p class="meta"><strong>å¹´æœˆ:</strong> <span id="detailMonth"></span>ã€€<strong>åˆ†é‡:</strong> <span id="detailCat"></span></p>
    <div id="detailRelated"></div>
    <div id="detailPDF" style="margin-top:.6rem;"></div>
  </div>
</dialog>

<!-- PDFãƒ¢ãƒ¼ãƒ€ãƒ« -->
<dialog id="pdfModal" aria-label="PDFã‚’è¡¨ç¤º">
  <div class="modal-head">
    <strong id="pdfTitle">PDF</strong>
    <button id="closePdf" aria-label="é–‰ã˜ã‚‹">Ã—</button>
  </div>
  <div class="pdf-body">
    <iframe id="pdfFrame" title="PDFè¡¨ç¤º" loading="lazy" referrerpolicy="no-referrer"></iframe>
  </div>
</dialog>

<style>
.toolbar{display:flex;justify-content:space-between;align-items:center;gap:.6rem;margin:.7rem 0 1rem;flex-wrap:wrap}
.filters{display:flex;gap:.4rem;flex-wrap:wrap}
.fbtn{border:1px solid #e5e7eb;background:#fff;padding:.35rem .7rem;border-radius:999px;cursor:pointer;font-size:.9rem}
.fbtn.active{background:#eef5ff;border-color:#cfe2ff}
#kw{padding:.42rem .6rem;border:1px solid #e5e7eb;border-radius:9px;min-width:14rem;max-width:60vw;font-size:.92rem}

.matrix-wrap{overflow:auto;border:1px solid #eee;border-radius:12px}
table.matrix{width:100%;border-collapse:collapse;font-size:.93rem}
.matrix th,.matrix td{padding:.34rem .48rem;border-bottom:1px solid #f1f5f9;vertical-align:top}
.matrix thead th{position:sticky;top:0;background:#fafafa;z-index:1;font-weight:700}
.ym{font-size:.86rem;color:#475569;white-space:nowrap}
.q-title{font-weight:700;line-height:1.3;margin:.05rem 0 .1rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}
.q-session{font-size:.82rem;color:#64748b}
.muted{color:#9ca3af}
.sortable{cursor:pointer;user-select:none}
.sortable:focus{outline:2px solid #cfe2ff;border-radius:6px}

.chip.cat{display:inline-flex;align-items:center;gap:.28rem;font-size:.82rem;font-weight:600;background:#eef5ff;color:#1d4ed8;border:1px solid #cfe2ff;border-radius:999px;padding:.16rem .42rem;cursor:pointer}
.chip.cat .ico{width:1em;display:inline-block;text-align:center}

@media(max-width:720px){
  .matrix th,.matrix td{padding:.26rem .38rem}
  .q-title{font-size:.94rem}
  .q-session{display:none}
  .chip.cat{font-size:.8rem;padding:.14rem .38rem}
  .matrix th:nth-child(1), .matrix td:nth-child(1){width:5.8rem}
  .matrix th:nth-child(3), .matrix td:nth-child(3){width:6.1rem}
  .matrix th:nth-child(4), .matrix td:nth-child(4){width:4.8rem}
}

/* === PDFãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆiPhoneæœ€é©åŒ–ï¼‰ === */
dialog{border:none;border-radius:12px;max-width:min(720px,96vw);width:96vw;padding:0}
dialog::backdrop{background:rgba(0,0,0,.35)}
.modal-head{display:flex;justify-content:space-between;align-items:center;padding:.7rem .9rem;border-bottom:1px solid #eee}
.modal-head strong{font-size:1rem}
.modal-head button{border:none;background:#fff;font-size:1.1rem;line-height:1;border-radius:8px;padding:.3rem .5rem;cursor:pointer}
.modal-body{padding:.8rem .9rem .9rem;font-size:.95rem;line-height:1.6}
.modal-body .meta{margin:.2rem 0}

#pdfModal{max-width:100vw;width:100vw;height:100vh;padding:0;margin:0;border-radius:0}
#pdfModal .pdf-body{height:calc(100vh - 48px - env(safe-area-inset-bottom));padding:0;margin:0}
#pdfFrame{width:100%;height:100%;border:0;display:block}

.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
</style>

{% raw %}
<script>
document.addEventListener('DOMContentLoaded', () => {
  // === å®šæ•°ãƒ»è¦ç´ å–å¾— ============================================================
  const ICONS = { EDU:'ğŸ“˜', WEL:'ğŸ’—', TOUR:'ğŸ', OTHER:'ğŸ§©' };
  const kwEl  = document.getElementById('kw');
  const tbody = document.querySelector('#matrixTable tbody');
  const fbtns = Array.from(document.querySelectorAll('.fbtn'));
  if (!tbody) return;

  // === è¡Œãƒ¡ã‚¿ç”Ÿæˆï¼ˆæœªçŸ¥keyã¯OTHERã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ ===============================
  const rows = Array.from(tbody.querySelectorAll('tr.row')).map(tr => {
    let catKey = (tr.dataset.catkey || 'OTHER').toUpperCase().trim();
    if (!['EDU','WEL','TOUR','OTHER'].includes(catKey)) catKey = 'OTHER';
    const chipIco = tr.querySelector('.chip.cat .ico');
    if (chipIco) chipIco.textContent = ICONS[catKey] || 'ğŸ§©';
    return {
      tr,
      catKey,
      hay: (
        (tr.dataset.title||'')+' '+
        (tr.dataset.session||'')+' '+
        (tr.dataset.month||'')+' '+
        (tr.dataset.category||'')
      ).toLowerCase()
    };
  });

  function apply() {
    const active = document.querySelector('.fbtn.active');
    const filterKey = active ? (active.dataset.filter || 'ALL') : 'ALL';
    const kw = (kwEl?.value || '').toLowerCase();
    rows.forEach(m => {
      const okC = (filterKey === 'ALL' || m.catKey === filterKey);
      const okK = (!kw || m.hay.includes(kw));
      m.tr.style.display = (okC && okK) ? '' : 'none';
    });
  }

  // === ãƒ•ã‚£ãƒ«ã‚¿ãƒœã‚¿ãƒ³ =============================================================
  fbtns.forEach(b => {
    b.addEventListener('click', () => {
      fbtns.forEach(x => x.classList.remove('active'));
      b.classList.add('active');
      apply();
    });
  });

  // è¡Œå†…ã®åˆ†é‡ãƒãƒƒãƒ— â†’ åŒã‚­ãƒ¼ã®ãƒœã‚¿ãƒ³ã‚’æ“¬ä¼¼ã‚¯ãƒªãƒƒã‚¯
  document.addEventListener('click', e => {
    const chip = e.target.closest('.chip.cat');
    if (!chip) return;
    const key = (chip.dataset.catkey || 'OTHER').toUpperCase();
    const btn = fbtns.find(x => x.dataset.filter === key);
    if (btn) btn.click();
  });

  // === æ¤œç´¢ =======================================================================
  kwEl?.addEventListener('input', apply);

  // === è©³ç´°ã‚«ãƒ¼ãƒ‰ ================================================================
  const dlgDetail = document.getElementById('detailModal');
  document.getElementById('closeDetail')?.addEventListener('click', () => dlgDetail.close());
  document.addEventListener('click', e => {
    const row = e.target.closest('tr.row');
    if (!row) return;
    if (e.target.closest('a.open-pdf')) return; // PDFãƒªãƒ³ã‚¯ã¯åˆ¥å‡¦ç†
    document.getElementById('detailTitle').textContent   = row.dataset.title || '';
    document.getElementById('detailSession').textContent = row.dataset.session || '';
    document.getElementById('detailMonth').textContent   = row.dataset.month || '';
    document.getElementById('detailCat').textContent     = row.dataset.category || '';
    const rel = JSON.parse(row.dataset.related || '[]');
    const relDiv = document.getElementById('detailRelated');
    relDiv.innerHTML = rel.length
      ? '<strong>é¡ä¼¼è­°å“¡</strong><ul style="margin:.4rem 0 .2rem 1.1rem;">' +
        rel.map(x=>`<li>${x.name}ï¼ˆ${x.party}ï¼‰ï¼š${x.month}ï¼${x.topic}</li>`).join('') +
        '</ul>' : '';
    const pdf = row.dataset.pdf || '';
    document.getElementById('detailPDF').innerHTML = pdf
      ? `<a href="${pdf}" class="btn open-pdf" data-title="${row.dataset.title}">ğŸ“„ PDFã‚’é–‹ã</a>
         &nbsp; <a href="${pdf}" target="_blank" rel="noopener" class="btn ghost">â†—ï¸ æ–°ã—ã„ã‚¿ãƒ–</a>`
      : '<span class="muted">PDFãªã—</span>';
    dlgDetail.showModal();
  });

  // === PDFãƒ¢ãƒ¼ãƒ€ãƒ« ===============================================================
  const pdfDlg   = document.getElementById('pdfModal');
  const pdfFrame = document.getElementById('pdfFrame');
  const pdfTitle = document.getElementById('pdfTitle');
  document.getElementById('closePdf')?.addEventListener('click', () => {
    if (pdfFrame) pdfFrame.src = 'about:blank';
    pdfDlg.close();
  });
  document.addEventListener('click', e => {
    const a = e.target.closest('a.open-pdf');
    if (!a) return;
    e.preventDefault();
    pdfTitle.textContent = a.dataset.title || 'PDF';
    pdfFrame.src = a.getAttribute('href');
    pdfDlg.showModal();
  });

  apply(); // åˆæœŸè¡¨ç¤º
});
</script>
{% endraw %}
