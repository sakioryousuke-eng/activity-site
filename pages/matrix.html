---
layout: default
title: ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
permalink: /pages/matrix.html
---

<h1>ä¸€èˆ¬è³ªå•ãƒãƒˆãƒªãƒƒã‚¯ã‚¹</h1>
<p>è¡Œï¼ˆè³ªå•ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€ä¼šæœŸã‚„é¡ä¼¼è­°å“¡ã®è©³ç´°ãŒé–‹é–‰ã—ã¾ã™ã€‚PDFã¯åˆ¥ã‚¿ãƒ–ã§é–‹ãã¾ã™ã€‚</p>

<style>
  .matrix-wrap { overflow-x: auto; }
  table.matrix { width:100%; border-collapse: collapse; }
  .matrix th, .matrix td { border:1px solid #ddd; padding:.72rem; vertical-align: top; }
  .matrix thead th { position: sticky; top: 0; background:#fafafa; z-index:1; }

  /* è¡Œï¼ˆè³ªå•ï¼‰ */
  .matrix tbody tr.data-row { cursor: pointer; }
  .matrix tbody tr.data-row:hover { background:#f7fbff; }
  .matrix tbody tr.data-row:focus { outline: 2px solid #cfe2ff; outline-offset:-2px; }
  .matrix tbody tr.data-row .lead { display:flex; align-items:center; gap:.5rem; }
  .matrix tbody tr.data-row .chev { font-size:.9rem; transition: transform .15s ease; opacity:.75; }
  .matrix tbody tr.data-row[aria-expanded="true"] .chev { transform: rotate(90deg); }

  /* æ˜ç´° */
  .matrix tbody tr.detail-row { display: none; background:#fcfcfc; }
  .matrix tbody tr.detail-row.open { display: table-row; }

  .badge { display:inline-block; padding:.15rem .5rem; border-radius:999px; background:#eef5ff; font-size:.8rem; }
  .pill { display:inline-block; padding:.1rem .45rem; border:1px solid #cfe2ff; border-radius:6px; margin-right:.35rem; font-size:.8rem; background:#f6f9ff; }

  /* PDFãƒªãƒ³ã‚¯ */
  .pdf-link {
    display:inline-block; margin-top:.4rem;
    background:#eff6ff; color:#1d4ed8; border:1px solid #dbeafe;
    padding:.35rem .6rem; border-radius:8px; text-decoration:none; font-size:.9rem;
    white-space:nowrap;
  }
  .pdf-link:hover { background:#dbeafe; }

  /* ã‚¹ãƒãƒ›æœ€é©åŒ–ï¼šè¦‹å‡ºã—éè¡¨ç¤ºï¼‹è¡Œé«˜åœ§ç¸®ï¼‹è¦ç´ æ•´ç† */
  @media (max-width: 720px) {
    .matrix thead { display:none; }
    .matrix th, .matrix td { padding:.42rem .5rem; }
    .matrix tbody tr.data-row { display:block; border:1px solid #eee; margin-bottom:.75rem; }
    .matrix tbody tr.data-row td { display:block; border:none; border-bottom:1px dashed #eee; }
    .matrix tbody tr.data-row td:first-child { font-weight:700; }
    .matrix tbody tr.detail-row.open { display:block; }
    .badge { font-size:.78rem; }
    .pill { margin:.2rem .25rem .15rem 0; }
  }
</style>

<div class="matrix-wrap">
<table class="matrix">
  <thead>
    <tr>
      <th style="width:10rem;">åˆ†é‡</th>
      <th>å´å°¾ã®è³ªå•ï¼ˆå¹´æœˆãƒ»æ–‡è¨€ï¼‰</th>
      <th style="width:18rem;">é¡ä¼¼è­°å“¡ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°ï¼‰</th>
    </tr>
  </thead>
  <tbody>
  {% assign idx = 0 %}
  {% for category in site.data.matrix %}
    {% assign cat = category[0] %}
    {% assign items = category[1] %}
    {% for item in items %}
      {% assign row_id = 'row-' | append: idx %}
      <tr class="data-row"
          data-target="{{ row_id }}"
          tabindex="0"
          aria-expanded="false"
          aria-controls="{{ row_id }}">
        <td><span class="badge">{{ cat }}</span></td>
        <td>
          <div class="lead">
            <span class="chev">â–¶</span>
            <div>
              <div><strong>{{ item.sakio.month }}</strong>ã€€{{ item.sakio.text }}</div>
              <div class="pill">ä¼šæœŸï¼š{{ item.sakio.session }}</div>
              {% if item.sakio.pdf %}
                <div>
                  <a href="{{ site.baseurl }}{{ item.sakio.pdf }}"
                     target="_blank" rel="noopener"
                     class="pdf-link" data-no-toggle>ğŸ“„ è­°äº‹è¦ç´„PDFã‚’é–‹ã</a>
                </div>
              {% endif %}
            </div>
          </div>
        </td>
        <td>
          {% if item.related and item.related.size > 0 %}
            {% for r in item.related %}
              <span class="pill">{{ r.name }}ï¼ˆ{{ r.party }}ï¼‰</span>
            {% endfor %}
            <small style="display:block;margin-top:.25rem;color:#64748b;">â€¦ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°</small>
          {% else %}
            <span>-</span>
          {% endif %}
        </td>
      </tr>
      <tr id="{{ row_id }}" class="detail-row" role="region" aria-label="è©³ç´°">
        <td colspan="3">
          <div style="display:grid; gap:.5rem;">
            <div><strong>è³ªå•è©³ç´°</strong>ï¼š{{ item.sakio.session }}ï¼{{ item.sakio.month }}ï¼{{ item.sakio.text }}</div>

            {% if item.sakio.pdf %}
              <div>
                <a href="{{ site.baseurl }}{{ item.sakio.pdf }}"
                   target="_blank" rel="noopener"
                   class="pdf-link" data-no-toggle>ğŸ“„ è­°äº‹è¦ç´„PDFã‚’é–‹ã</a>
              </div>
            {% endif %}

            {% if item.related and item.related.size > 0 %}
              <div>
                <strong>é¡ä¼¼è­°å“¡ è©³ç´°</strong>
                <ul style="margin:.4rem 0 .2rem 1.2rem;">
                  {% for r in item.related %}
                    <li><strong>{{ r.name }}</strong>ï¼ˆ{{ r.party }}ï¼‰ï¼š{{ r.month }}ï¼{{ r.topic }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}
          </div>
        </td>
      </tr>
      {% assign idx = idx | plus: 1 %}
    {% endfor %}
  {% endfor %}
  </tbody>
</table>
</div>

<script>
  // è¡Œãƒˆã‚°ãƒ«ï¼šãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯ã‚„PDFãƒœã‚¿ãƒ³ã§ã¯ãƒˆã‚°ãƒ«ã—ãªã„
  document.addEventListener('click', function(e){
    if (e.target.closest('a, [data-no-toggle]')) return;
    const tr = e.target.closest('tr.data-row');
    if(!tr) return;
    const id = tr.getAttribute('data-target');
    const detail = document.getElementById(id);
    if(!detail) return;
    const open = detail.classList.toggle('open');
    tr.setAttribute('aria-expanded', open ? 'true' : 'false');
  });

  // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã§é–‹é–‰ï¼ˆEnter / Spaceï¼‰
  document.addEventListener('keydown', function(e){
    if (e.key !== 'Enter' && e.key !== ' ') return;
    const tr = e.target.closest('tr.data-row');
    if(!tr) return;
    e.preventDefault();
    const id = tr.getAttribute('data-target');
    const detail = document.getElementById(id);
    if(!detail) return;
    const open = detail.classList.toggle('open');
    tr.setAttribute('aria-expanded', open ? 'true' : 'false');
  });
</script>
