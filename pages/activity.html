---
layout: default
title: 地域活動・議員活動（統合ビュー）
---

# 🗂 活動の記録（統合ビュー）
<p>「地域・議会・行政」それぞれの活動を一覧で整理。表・カード切替、検索・絞り込みが可能です。</p>

<div class="toolbar">
  <div class="left">
    <button class="viewbtn active" data-view="table">表</button>
    <button class="viewbtn" data-view="cards">カード</button>
    <div class="filters sub">
      <button class="fbtn active" data-filter="all">全体</button>
      <button class="fbtn" data-filter="地域">地域</button>
      <button class="fbtn" data-filter="議会">議会</button>
      <button class="fbtn" data-filter="行政">行政</button>
    </div>
  </div>
  <div class="right">
    <input id="kw" type="search" placeholder="キーワード（タイトル・タグ・要旨）">
  </div>
</div>

{% assign list = site.data.activity.items | sort: "date" | reverse %}

<!-- 表形式 -->
<div id="view-table">
  <div class="table-wrap">
    <table class="dense">
      <thead>
        <tr>
          <th style="width:7rem;">日付</th>
          <th>タイトル／要旨</th>
          <th style="width:6rem;">区分</th>
          <th style="width:10rem;">タグ</th>
          <th style="width:5rem;">資料</th>
        </tr>
      </thead>
      <tbody>
      {% for a in list %}
        <tr data-category="{{ a.category }}"
            data-text="{{ a.title }} {{ a.summary }} {% if a.tag %}{% for t in a.tag %}{{ t }} {% endfor %}{% endif %}">
          <td>{{ a.date }}</td>
          <td><strong>{{ a.title }}</strong><br><span class="sum">{{ a.summary }}</span></td>
          <td><span class="cat">{{ a.category }}</span></td>
          <td class="tags">{% for t in a.tag %}<span class="tag">{{ t }}</span>{% endfor %}</td>
          <td>
            {% if a.pdf %}<a href="{{ a.pdf | relative_url }}" data-modal="pdf" data-title="{{ a.title }}">PDF</a>{% endif %}
            {% if a.link %}<a href="{{ a.link | relative_url }}">関連</a>{% endif %}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- カード形式 -->
<div id="view-cards" style="display:none;">
  <div class="grid">
  {% for a in list %}
    <div class="card" data-category="{{ a.category }}" data-text="{{ a.title }} {{ a.summary }} {% for t in a.tag %}{{ t }} {% endfor %}">
      <div class="title">{{ a.title }} <span class="chip cat">{{ a.category }}</span></div>
      <p class="meta">📅 {{ a.date }}</p>
      {% if a.summary %}<p>{{ a.summary }}</p>{% endif %}
      {% if a.image %}<img src="{{ a.image | relative_url }}" alt="{{ a.title }}" class="thumb">{% endif %}
      <div class="actions">
        {% if a.pdf %}<a href="{{ a.pdf | relative_url }}" data-modal="pdf" data-title="{{ a.title }}" class="btn">PDF</a>{% endif %}
        {% if a.link %}<a href="{{ a.link | relative_url }}" class="btn">関連</a>{% endif %}
      </div>
      <div class="tags">{% for t in a.tag %}<span class="tag">{{ t }}</span>{% endfor %}</div>
    </div>
  {% endfor %}
  </div>
</div>

<style>
.toolbar{display:flex;justify-content:space-between;align-items:center;gap:.5rem;margin:.6rem 0 1rem;flex-wrap:wrap}
.viewbtn,.fbtn{border:1px solid #e5e7eb;background:#fff;padding:.3rem .6rem;border-radius:999px;cursor:pointer}
.viewbtn.active,.fbtn.active{background:#eef5ff;border-color:#cfe2ff}
.table-wrap{overflow:auto;border:1px solid #eee;border-radius:10px}
table.dense{width:100%;border-collapse:collapse;font-size:.95rem}
table.dense th,td{padding:.5rem .6rem;border-bottom:1px solid #f1f5f9}
.sum{color:#475569;font-size:.9rem}
.cat{background:#f3f4f6;border-radius:6px;padding:.1rem .45rem;font-size:.8rem}
.tags .tag{display:inline-block;font-size:.8rem;background:#eef2ff;color:#374151;border-radius:999px;padding:.1rem .4rem;margin:.1rem}
.grid{display:grid;gap:1.2rem;grid-template-columns:1fr}
@media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
.card{border:1px solid #eee;border-radius:14px;padding:1.2rem;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.05)}
.thumb{width:100%;border-radius:10px;margin:.5rem 0}
.btn{background:#eff6ff;color:#1d4ed8;padding:.35rem .65rem;border-radius:8px;text-decoration:none;font-size:.9rem}
</style>

<script>
document.querySelectorAll('.viewbtn').forEach(b=>{
  b.onclick=()=>{document.querySelectorAll('.viewbtn').forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
  document.getElementById('view-table').style.display=b.dataset.view==='table'?'':'none';
  document.getElementById('view-cards').style.display=b.dataset.view==='cards'?'':'none';};
});
function applyFilter(){
  const f=document.querySelector('.fbtn.active').dataset.filter;
  const kw=document.getElementById('kw').value.toLowerCase();
  document.querySelectorAll('[data-category]').forEach(el=>{
    const cat=el.dataset.category,text=el.dataset.text.toLowerCase();
    const ok=(f==='all'||cat===f)&&(!kw||text.includes(kw));
    el.style.display=ok?'':'none';
  });
}
document.querySelectorAll('.fbtn').forEach(b=>b.onclick=()=>{document.querySelectorAll('.fbtn').forEach(x=>x.classList.remove('active'));b.classList.add('active');applyFilter();});
document.getElementById('kw').oninput=applyFilter;
</script>
